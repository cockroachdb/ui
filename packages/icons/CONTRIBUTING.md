# CONTRIBUTING ICONS

## How do I add icons?

Icons are added to this package by copying SVG files to the `/svg` folder. If the icon will have it's `fill` attribute changed via a prop, then copy your file into `/svg/customFill` directory. If the icon should not have its color changed, then copy your file into `/svg/preserveFill`. After copying your file into the appropriate directory, update the `/src/index.ts` file to include your generated icon component for export. You may want to run the build locally to resolve any issues (`pnpm build`).

Some things to consider about the name of your SVG file:
1. Your `.svg` file will need to have a **unique** name in this repo (that is it can't be named the same as any other `.svg` file in the `/svg` directory).
1. Your `.svg` file name should not contain spaces or non-alphabetic characters (except for dashes, e.g. `-`).
1. Your `.svg` file name should conform to [kebab case](https://www.pluralsight.com/blog/software-development/programming-naming-conventions-explained#kebab-case)

## How do I publish this package?

Create a pull request. This repo has automated publishing set up using [Auto](https://github.com/intuit/auto#readme). A new version of `@cockroachlabs/icons` (and `@cockroachlabs/ui-components`) will be generated when your pull request merges. If you need a _Canary version_ published (a test version), the create a pull request from a source branch instead of a fork (create a branch with `github.com/cockroachdb/ui` as the origin).

## How does this package work?

This package serves as a store for SVG icons that are converted and published as React components. The SVGs are stored in the [/svg](https://github.com/cockroachdb/ui/tree/master/packages/icons/svg) directory and [@svgr/cli](https://react-svgr.com/docs/cli/) is used to convert them to React components in TypeScript.

Since the components are generated from `.svg` files they are not committed in this repository. The only file that is kept under source control is the [index.ts](https://github.com/cockroachdb/ui/blob/master/packages/icons/src/index.ts). The components are generated to the directory `src/components` by the npm script [`build:generate:*`](https://github.com/cockroachdb/ui/blob/master/packages/icons/package.json). Once the components are generated, they are transpiled and TypeScript declarations are generated by the [TypeScript Compiler](https://www.typescriptlang.org/docs/handbook/compiler-options.html) (npm script [`build:typescript`](https://github.com/cockroachdb/ui/blob/master/packages/icons/package.json)).

To generate the files locally run pnpm run build`.

### Preserving or removing fill attributes

This package is used to process several icon sets. Some icons, like our System Icons, will have their fills altered to match an intent while some others, like flags or third party icons, should have their fill attributes preserved and not allow the user to modify them. To accomodate each of these needs the `svg` directory has two sub-directories, `preserveFill` and `customFill`. Each of these sub-directories will be process by a command run by an npm lifecycle script; `build:generate:stripfill` to remove fill attributes and `build:generate:preserve` to leave the fill attributes alone. This works by having the `stripfill` script run an `svgr` command that will pick up configuration options found in `.svgo.yaml`. These configuration options follow the [SVGO](https://github.com/svg/svgo/) format, in this case using [`removeAttr`](https://github.com/svg/svgo/blob/master/plugins/removeAttrs.js). The `preserve` script on the other hand uses the `--no-runtime-config` cli option to suppress this config file, therefor leaving fill attributes in tact.
